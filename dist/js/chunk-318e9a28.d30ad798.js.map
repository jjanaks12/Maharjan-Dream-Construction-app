{"version":3,"sources":["webpack:///./src/components/common/Brand.tsx","webpack:///./src/pages/Login.tsx","webpack:///./src/core/FormComponent.tsx","webpack:///./src/assets/images/logo.svg"],"names":["name","isLoggingIn","formData","email","password","errors","this","$nextTick","$route","query","formSubmitted","length","event","preventDefault","resetErrorMessage","then","result","hasError","login","data","errorList","$store","dispatch","$router","push","FormComponent","computed","methods","Object","keys","reduce","acc","key","message","field","forEach","module","exports"],"mappings":"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","file":"js/chunk-318e9a28.d30ad798.js","sourcesContent":["import { Component, Vue } from 'vue-property-decorator'\r\nimport { VNode } from 'vue'\r\n\r\nimport logo from '@/assets/images/logo.svg'\r\n\r\n\r\n@Component\r\nexport default class Brand extends Vue {\r\n    render(): VNode {\r\n        return <div class=\"logo\">\r\n            <router-link to={{ name: 'home' }}>\r\n                <img src={logo} alt=\"Guthi\" />\r\n            </router-link>\r\n        </div>\r\n    }\r\n}","import { iErrorMessage, iLogin } from '@/interfaces/auth'\r\nimport FormComponent from '@/core/FormComponent'\r\n\r\nimport { validate } from 'vee-validate'\r\nimport { VNode } from 'vue'\r\nimport { Component } from 'vue-property-decorator'\r\nimport { mapActions, mapGetters } from 'vuex'\r\n\r\nimport Brand from '@/components/common/Brand'\r\n\r\n@Component({\r\n  computed: {\r\n    ...mapGetters({\r\n      errorList: 'root/getErrorMessage',\r\n    })\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      login: 'root/login'\r\n    })\r\n  }\r\n})\r\nexport default class Login extends FormComponent {\r\n  private login!: (formData: iLogin) => Promise<boolean>\r\n  private isLoggingIn: boolean = false\r\n  private errorList?: iErrorMessage\r\n  private formData: iLogin = {\r\n    email: '',\r\n    password: ''\r\n  }\r\n\r\n  constructor() {\r\n    super()\r\n\r\n    this.errors = {\r\n      email: [],\r\n      password: []\r\n    }\r\n  }\r\n\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      if (this.$route.query.email)\r\n        this.formData.email = this.$route.query.email as string\r\n    })\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @returns VNode\r\n   */\r\n  render(): VNode {\r\n    return (<section class=\"account__section\">\r\n      <div class=\"account__section__body\">\r\n        <Brand />\r\n        <h1>Login</h1>\r\n        <form action=\"#\" class=\"account__section__form\" onSubmit={this.formSubmitted} novalidate>\r\n          <div class={{ 'form__group': true, 'input--invalid': this.errors.email.length > 0 }}>\r\n            <label class=\"sr-only\" for=\"asf-username\">Username</label>\r\n            <input type=\"email\" name=\"username\" id=\"asf-username\" placeholder=\"Username\" v-model={this.formData.email} />\r\n            {this.errors.email.length > 0 ? (<span class=\"input__text\">{this.errors.email[0]}</span>) : null}\r\n          </div>\r\n          <div class={{ 'form__group': true, 'input--invalid': this.errors.password.length > 0 }}>\r\n            <label class=\"sr-only\" for=\"asf-password\">Password</label>\r\n            <input type=\"password\" name=\"password\" id=\"asf-password\" placeholder=\"Password\" v-model={this.formData.password} />\r\n            {this.errors.password.length > 0 ? (<span class=\"input__text\">{this.errors.password[0]}</span>) : null}\r\n          </div>\r\n          <div class=\"form__holder\">\r\n            <router-link to={{ name: \"forgot_password\" }} class=\"forgot__password\">Forgot password?</router-link>\r\n          </div>\r\n          <div class=\"btn__holder\">\r\n            <div class=\"btn__block\">\r\n              <button type=\"submit\" class=\"btn btn__primary\">\r\n                {this.isLoggingIn ? (<span class=\"icon-spinner loading\"></span>) : null}\r\n                login\r\n              </button>\r\n            </div>\r\n            <div class=\"btn__block\">\r\n              <span class=\"text\">or</span>\r\n            </div>\r\n            <div class=\"btn__block\">\r\n              <router-link to={{ name: 'register' }} class=\"btn btn__danger\">register</router-link>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </section>)\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param event \r\n   * HTML Form submit event\r\n   * \r\n   * @returns void\r\n   */\r\n  async formSubmitted(event: HTMLFormElement): Promise<void> {\r\n    event.preventDefault()\r\n    this.resetErrorMessage()\r\n\r\n    await validate(this.formData.email, 'required|email|min:4', { name: 'email' })\r\n      .then(result => {\r\n        this.errors['email'] = result.errors\r\n      })\r\n\r\n    await validate(this.formData.password, 'required', { name: 'password' })\r\n      .then(result => {\r\n        this.errors['password'] = result.errors\r\n      })\r\n\r\n    this.$nextTick(async () => {\r\n      if (!this.hasError) {\r\n        this.isLoggingIn = true\r\n\r\n        try {\r\n          const data = await this.login(this.formData)\r\n\r\n          if (data) {\r\n            this.errors = { ...this.errors, ...this.errorList }\r\n            this.$store.dispatch('root/fetchUser')\r\n            this.$router.push({ name: 'realstate' })\r\n          }\r\n\r\n        } finally {\r\n          this.isLoggingIn = false\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { iErrorMessage } from '@/interfaces/auth'\r\nimport { Component, Vue } from 'vue-property-decorator'\r\n\r\n// let timer: any\r\n@Component\r\nexport default class FormComponent extends Vue {\r\n    protected errors!: iErrorMessage\r\n\r\n    // @Watch('errors', { deep: true })\r\n    // errorWatcher() {\r\n    //     if (timer)\r\n    //         return\r\n\r\n    //     timer = setTimeout(() => {\r\n    //         this.resetErrorMessage()\r\n    //     }, 7000)\r\n    // }\r\n\r\n    /**\r\n    * Checks if there are any errors\r\n    * \r\n    * @returns boolean\r\n    */\r\n    get hasError(): boolean {\r\n        return Object.keys(this.errors).reduce((acc: boolean, key: string): boolean => {\r\n            return acc || this.errors[key].length > 0\r\n        }, false)\r\n    }\r\n\r\n    get errorMessage(): string {\r\n        let message: string = ''\r\n\r\n        for (const field in this.errors) {\r\n            if (this.errors[field].length > 0) {\r\n                message = this.errors[field][0]\r\n                return message\r\n            }\r\n        }\r\n        return message\r\n    }\r\n\r\n    protected resetErrorMessage(): void {\r\n\r\n        Object.keys(this.errors).forEach((key: string) => {\r\n            this.errors[key] = []\r\n        })\r\n    }\r\n}\r\n","module.exports = __webpack_public_path__ + \"img/logo.e5abd6b7.svg\";"],"sourceRoot":""}